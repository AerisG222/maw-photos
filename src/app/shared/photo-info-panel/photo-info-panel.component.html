<div *ngIf="endSidenavExpanded" class="panel-contents">
    <div fxLayout="row">
        <div fxLayout="column" fxFlex="1 1 auto">
            <div *ngIf="showRatings$ | async" class="panel-heading" fxFlex>Rating</div>
            <app-rating
                class="widget"
                *ngIf="showRatings$ | async"
                [yourRating]="(rating$ | async)?.userRating"
                [avgRating]="(rating$ | async)?.averageRating"
                (rate)="onRate($event)">
            </app-rating>

            <div *ngIf="showComments$ | async" class="panel-heading" fxFlex>Comments</div>
            <app-comments
                fxFlex
                class="widget"
                *ngIf="showComments$ | async"
                [comments]="comments$ | async"
                (comment)="onComment($event)"
                #comments>
            </app-comments>

            <div *ngIf="showExif$ | async" class="panel-heading" fxFlex>EXIF Data</div>
            <app-exif
                class="widget"
                *ngIf="showExif$ | async"
                [exifData]="exif$ | async">
            </app-exif>

            <div *ngIf="showEffects$ | async" class="panel-heading" fxFlex>Effects</div>
            <app-effects
                class="widget"
                *ngIf="showEffects$ | async"
                [effects]="effects$ | async"
                (resetEffects)="onResetEffects()"
                (updateEffects)="onUpdateEffects($event)">
            </app-effects>

            <div class="widget">minimap</div>
        </div>
    </div>
</div>

<div fxLayout="column" fxFlex="0 0 auto" class="toolbar">
    <button
        class="menu-button"
        mat-button
        matTooltip="Show/Hide Info Panel"
        matTooltipPosition="before"
        (click)="toggleEndSidenav()">
        <mat-icon *ngIf="endSidenavExpanded" [inline]="true">chevron_right</mat-icon>
        <mat-icon *ngIf="!endSidenavExpanded" [inline]="true">chevron_left</mat-icon>
    </button>

    <button
        mat-button
        matTooltip="Show/Hide Ratings"
        matTooltipPosition="before"
        [disabled]="!endSidenavExpanded"
        [class.notactive]="!(showRatings$ | async)"
        (click)="toggleRatings()">
        <mat-icon [inline]="true">star</mat-icon>
    </button>
    <button
        mat-button
        matTooltip="Show/Hide Comments"
        matTooltipPosition="before"
        [disabled]="!endSidenavExpanded"
        [class.notactive]="!(showComments$ | async)"
        (click)="toggleComments()">
        <mat-icon [inline]="true">comment</mat-icon>
    </button>
    <button
        mat-button
        matTooltip="Show/Hide EXIF"
        matTooltipPosition="before"
        [disabled]="!endSidenavExpanded"
        [class.notactive]="!(showExif$ | async)"
        (click)="toggleExif()">
        <mat-icon [inline]="true">tune</mat-icon>
    </button>
    <button
        mat-button
        matTooltip="Show/Hide Effects"
        matTooltipPosition="before"
        [disabled]="!endSidenavExpanded"
        [class.notactive]="!(showEffects$ | async)"
        (click)="toggleEffects()">
        <mat-icon [inline]="true">photo_filter</mat-icon>
    </button>

    <span class="toolbar_title">Details</span>
</div>
